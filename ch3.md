[代目录](ReadMe.md#代目录)

本章内容
- 讨论如何构建一个词法分析器
- 建立每个词法单元的此法结构图或其它描述
- 编写代码识别输入中出现的每个词素，返回识别到的词法单元的有关信息

自动生成词法分析器
- 向一个 __词法分析器生成工具__（lexical-analyzer generator）描述词素的模式，将这些模式编译为具有词法分析器功能的代码
- 使得修改词法分析器的工作变得更加简单，因为只需要修改受到影响的模式，无需修改整个程序
- 加快词法分析器的实现速度，程序员只需要在很高的模式层次上描述软件，就可以依赖生成工具生成详细代码
- 我们将在 [3.5 节](ch3.md#词法分析器生成工具-lex)介绍一个名为 Lex 的词法分析器生成工具（它的一个最新变体称为 Flex）

在介绍词法分析器生成工具之前，我们先介绍正则表达式
- 正则表达式是一种可以很方便地描述词素模式的方法
- 将介绍如何对正则表达式进行转换
  - 首先转换为 __不确定有穷自动机__，然后再转换为 __确定有穷自动机__
  - 后两种表示方法可以作为一个“驱动程序”的输入
  - 这个驱动程序就是一段模拟这些自动机的代码
  - 它使用这些自动机确定下一个词法单元
  - 这个驱动程序以及对自动机的规约形成了词法分析器的核心部分

# 词法分析器的作用
<i style="color:gray">对应扫描中文版pdf页码68</i>

词法分析器
- 是编译的第一个阶段
- 它的主要任务是读入源程序的输入字符、将它们组成词素，生成并输出一个词法单元序列
  - 每个词法单元对应于一个词素
  - 这个词法单元序列被输出到语法分析器进行语法分析

语法分析器通常还要和符号表进行交互
- 当 __词法分析器__ 发现了一个标识符的词素时，它要将这个词素添加到符号表中
- 某些情况下，__词法分析器__ 会从符号表中读取有关标识符种类的信息，以确定向 __语法分析__ 器传送哪个词法单元
- 这种交互关系由图给出（*略*）
  - 通常交互是由 __语法分析器__ 调用 __词法分析器__ 实现的
  - 命令 `getNextToken` 所指的调用使得 __词法分析器__ 从它的输入中不断读取字符，直到它识别出下一个词素位置
  - __词法分析器__ 根据这个词素生成下一个词法单元并返回给 __语法分析器__

词法分析器的其它任务
- 过滤掉源程序中的注释和空白（空格、换行符、制表符、输入中用于分隔词法单元的其它字符）
- 将编译器生成的错误消息与源程序的位置联系起来
  - 例如，词法分析器可以负责记录遇到的换行符个数，以便给每个出错消息赋予一个行号
  - 某些编译器中，词法分析器会建立源程序的一个拷贝，并将出错消息插入到适当位置
  - 如果源程序使用了一个宏预处理器，则宏的扩展也可以有由词法分析器完成

有时，词法分析器可以分成两个级联的处理阶段
1. __扫描阶段__：主要负责不需要生成词法单元的简单处理，如删除注释和将多个连续空白字符压缩成一个字符
2. __词法分析阶段__：是较为复杂的部分，处理扫描阶段的输出并生成词法单元

## 词法分析器及语法分析

## 词法单元、模式和词素

## 词法单元的属性

## 此法错误

## 3.1 节的练习


# 输入缓冲
<i style="color:gray">对应扫描中文版pdf页码71</i>

# 词法单元的规约
<i style="color:gray">对应扫描中文版pdf页码73</i>

# 词法单元的识别
<i style="color:gray">对应扫描中文版pdf页码80</i>

# 词法分析器生成工具 Lex
<i style="color:gray">对应扫描中文版pdf页码89</i>

# 有穷自动机
<i style="color:gray">对应扫描中文版pdf页码93</i>

# 从正则表达式到自动机
<i style="color:gray">对应扫描中文版pdf页码96</i>

# 词法分析器生成工具的设计
<i style="color:gray">对应扫描中文版pdf页码105</i>

# 基于 DFA 的模式匹配器的优化
<i style="color:gray">对应扫描中文版pdf页码109</i>

# 第 3 章总结
<i style="color:gray">对应扫描中文版pdf页码118</i>

[代目录](ReadMe.md#代目录)